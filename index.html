<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaiWWai | Project Bible</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=DM+Sans:opsz,wght@9..40,400;700&family=Playfair+Display:ital,wght@0,400;1,900&display=swap" rel="stylesheet">
    <style>
        :root {
            --beige-light: #e8e4c9;
            --beige-dim: #d4c5a3;
            --beige-dark: #8a856b;
            --black: #0a0a0a;
            --grey-dark: #1f1f1f;
            --grey-mid: #404040;
            --liquid-color: rgba(212, 197, 163, 0.15);
        }

        body {
            background-color: var(--black);
            color: var(--beige-light);
            font-family: 'Courier Prime', monospace;
            overflow-x: hidden;
            margin: 0;
        }

        /* Typography overrides */
        .font-sans { font-family: 'DM Sans', sans-serif; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .font-mono { font-family: 'Courier Prime', monospace; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--black); }
        ::-webkit-scrollbar-thumb { background: var(--beige-dark); border-radius: 4px; }

        /* UTILITY ANIMATIONS */
        @keyframes liquid-flow {
            0% { background-position: 0% 0%; }
            100% { background-position: 0% 200%; }
        }

        .liquid-bg {
            background: linear-gradient(180deg, 
                rgba(10,10,10,1) 0%, 
                rgba(31,31,31,0.8) 50%, 
                rgba(10,10,10,1) 100%),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d4c5a3' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            animation: liquid-flow 60s linear infinite;
        }

        /* GLITCH EFFECTS */
        .glitch-wrapper { position: relative; display: inline-block; }
        .glitch-text { position: relative; z-index: 1; }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--black); opacity: 0.7;
        }
        .glitch-text::before {
            color: var(--beige-light);
            z-index: -1;
            animation: glitch-anim-1 3s infinite linear alternate-reverse;
        }
        .glitch-text::after {
            color: #505050;
            z-index: -2;
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 1px); }
            20% { clip-path: inset(60% 0 10% 0); transform: translate(2px, -1px); }
            40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 2px); }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(2px, -2px); }
            80% { clip-path: inset(10% 0 70% 0); transform: translate(-1px, 1px); }
            100% { clip-path: inset(30% 0 30% 0); transform: translate(1px, -1px); }
        }
        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, -1px); }
            100% { clip-path: inset(80% 0 10% 0); transform: translate(-2px, 1px); }
        }

        /* UI COMPONENTS */
        .nav-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .nav-btn::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; width: 0%; height: 1px;
            background-color: var(--beige-dim);
            transition: width 0.3s ease;
        }
        .nav-btn:hover::after, .nav-btn.active::after { width: 100%; }
        .nav-btn.active { color: var(--beige-light); text-shadow: 0 0 8px rgba(212, 197, 163, 0.3); }

        .content-card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(5px);
            border: 1px solid var(--grey-mid);
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }
        .content-card:hover {
            border-color: var(--beige-dark);
            transform: translateY(-2px);
        }

        /* THE FRONT PAGE (DECEPTION) */
        #public-face {
            background-color: #f0ece2; /* Beige Station Color */
            color: #111;
            font-family: 'DM Sans', sans-serif;
        }
        .tube-roundel {
            border: 8px solid #DC241F;
            background: white;
            width: 120px; height: 120px;
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .tube-bar {
            background: #0019A8;
            color: white;
            width: 140px;
            height: 24px;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 14px;
            letter-spacing: 1px;
        }
        
        #service-alert {
            position: fixed; bottom: -100px; left: 0; right: 0;
            background: #DC241F; color: white;
            padding: 1rem; text-align: center;
            transition: bottom 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        #service-alert.visible { bottom: 0; }

        /* THE CANVAS RAIN */
        #rain-canvas {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
            opacity: 0.15;
        }

        .fade-out { opacity: 0; pointer-events: none; transition: opacity 1s ease; }
        .hidden-content { display: none; }
        .visible-flex { display: flex; }
    </style>
</head>
<body>

    <!-- ===================== LAYER 1: THE PUBLIC FACE ===================== -->
    <div id="public-face" class="fixed inset-0 z-50 flex flex-col items-center justify-center transition-opacity duration-1000">
        <div class="tube-roundel mb-8">
            <div class="tube-bar">Turnpike</div>
        </div>
        <h1 class="text-4xl font-bold tracking-tight uppercase mb-2 text-gray-900">Station Status</h1>
        <div class="bg-white border border-gray-300 p-6 w-full max-w-md shadow-sm">
            <div class="flex justify-between items-center border-b border-gray-200 pb-2 mb-2">
                <span class="font-bold">Piccadilly Line</span>
                <span class="text-green-700 font-bold">Good Service</span>
            </div>
            <div class="flex justify-between items-center border-b border-gray-200 pb-2 mb-2">
                <span class="font-bold">Victoria Line</span>
                <span class="text-green-700 font-bold">Good Service</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="font-bold text-gray-400">Northern Line</span>
                <span class="text-gray-400">Part Suspended</span>
            </div>
        </div>
        <p class="mt-8 text-xs text-gray-500 uppercase tracking-widest">Transport for London</p>

        <!-- The Trigger -->
        <div id="service-alert" class="flex flex-col items-center justify-center">
            <h2 class="text-lg font-bold uppercase tracking-widest glitch-text" data-text="SERVICE DISRUPTION">SERVICE DISRUPTION</h2>
            <p class="text-sm opacity-80 mb-2">Unidentified anomaly detected at Platform 4.</p>
            <button id="breach-btn" class="bg-black text-white px-6 py-1 text-sm uppercase border border-white hover:bg-white hover:text-black transition-colors">
                VIEW REPORT
            </button>
        </div>
    </div>

    <!-- ===================== LAYER 2: THE GAME BIBLE ===================== -->
    <div id="game-bible" class="hidden-content min-h-screen relative">
        
        <!-- Background Canvas for "Pouring" Effect -->
        <canvas id="rain-canvas"></canvas>
        <div class="fixed inset-0 liquid-bg pointer-events-none z-[-2]"></div>

        <!-- Navigation -->
        <nav class="fixed top-0 left-0 w-full z-40 bg-black/80 backdrop-blur-md border-b border-gray-800">
            <div class="container mx-auto px-6 h-16 flex items-center justify-between">
                <div class="text-2xl font-bold font-serif tracking-tighter text-[#d4c5a3]">
                    WaiWWai
                </div>
                <div class="hidden md:flex space-x-8 text-sm font-mono text-gray-400">
                    <button class="nav-btn active" data-target="overview">OVERVIEW</button>
                    <button class="nav-btn" data-target="gameplay">GAMEPLAY</button>
                    <button class="nav-btn" data-target="characters">CHARACTERS</button>
                    <button class="nav-btn" data-target="progression">PROGRESSION</button>
                    <button class="nav-btn" data-target="mechanics">MECHANICS</button>
                </div>
                <!-- Mobile Menu Button (Simplified) -->
                <button class="md:hidden text-[#d4c5a3]">///</button>
            </div>
        </nav>

        <!-- Content Container -->
        <main class="container mx-auto px-4 pt-24 pb-12">
            
            <!-- SECTION: OVERVIEW -->
            <section id="overview" class="content-section animate-fade-in">
                <div class="max-w-4xl mx-auto text-center mb-16">
                    <p class="text-[#8a856b] text-xs font-bold tracking-[0.3em] mb-4">PROJECT BIBLE: CONFIDENTIAL</p>
                    <h1 class="text-5xl md:text-7xl font-serif font-black text-[#e8e4c9] mb-6 leading-tight">
                        where am i,<br>
                        <span class="italic text-[#606060]">wait,</span><br>
                        where am i
                    </h1>
                    <p class="text-xl text-gray-400 font-mono max-w-2xl mx-auto leading-relaxed">
                        A disorienting 2.5D psychological horror experience about the terrifying isolation of dementia, set on an infinite London Underground platform.
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-6 max-w-5xl mx-auto">
                    <div class="content-card p-8">
                        <h3 class="text-xl font-serif text-[#d4c5a3] mb-4 border-b border-gray-700 pb-2">The Premise</h3>
                        <p class="text-gray-400 text-sm leading-7">
                            Inspired by <em>Everywhere at the End of Time</em>, WaiWWai places the player in the shoes of an elderly woman lost on a muted, beige underground platform. Reality is unstable. Time skips. Strangers accuse you of things you didn't do. The only constant is the train that rushes past—a violent reset that erodes the world further.
                        </p>
                    </div>
                    <div class="content-card p-8 flex flex-col justify-center items-center text-center border-l-4 border-[#d4c5a3]">
                        <h3 class="text-4xl font-serif italic text-[#e8e4c9] mb-2">"No Future."</h3>
                        <h3 class="text-4xl font-serif italic text-[#8a856b] mb-2">"No Backstory."</h3>
                        <h3 class="text-4xl font-serif italic text-[#404040]">"No Escape."</h3>
                    </div>
                </div>
            </section>

            <!-- SECTION: GAMEPLAY -->
            <section id="gameplay" class="content-section hidden-content">
                <div class="max-w-5xl mx-auto">
                    <div class="flex flex-col md:flex-row items-end mb-12 border-b border-gray-800 pb-4">
                        <h2 class="text-4xl font-serif text-[#e8e4c9]">The Loop</h2>
                        <span class="ml-4 text-xs font-mono text-[#8a856b] mb-2">SYSTEMIC DETERIORATION</span>
                    </div>

                    <div class="grid md:grid-cols-3 gap-8 mb-16">
                        <!-- Card 1 -->
                        <div class="content-card p-6 relative overflow-hidden group">
                            <div class="absolute top-0 right-0 p-2 opacity-20 text-4xl font-black">01</div>
                            <h4 class="text-lg font-bold text-[#d4c5a3] mb-3">Exploration</h4>
                            <p class="text-sm text-gray-400">Navigate the infinite beige tiles of Turnpike Lane. Interact with objects that may or may not exist. The movement is slow, heavy, 2.5D side-scrolling.</p>
                        </div>
                        <!-- Card 2 -->
                        <div class="content-card p-6 relative overflow-hidden group">
                            <div class="absolute top-0 right-0 p-2 opacity-20 text-4xl font-black">02</div>
                            <h4 class="text-lg font-bold text-[#d4c5a3] mb-3">The Train Event</h4>
                            <p class="text-sm text-gray-400">A deafening, 100db screech. The screen shakes violently. This is the level transition. When it leaves, the platform has changed. You have aged.</p>
                        </div>
                        <!-- Card 3 -->
                        <div class="content-card p-6 relative overflow-hidden group">
                            <div class="absolute top-0 right-0 p-2 opacity-20 text-4xl font-black">03</div>
                            <h4 class="text-lg font-bold text-[#d4c5a3] mb-3">Gaslighting</h4>
                            <p class="text-sm text-gray-400">The game lies to you. Controls invert. Inventory items disappear. NPCs shout at you for actions you never took.</p>
                        </div>
                    </div>

                    <!-- Interactive Element: The Train Reset -->
                    <div class="bg-[#111] border border-gray-800 p-8 rounded-sm text-center relative overflow-hidden">
                        <h3 class="font-mono text-red-900 text-xl tracking-widest mb-4">SIMULATE RESET</h3>
                        <button id="trigger-reset" class="px-8 py-3 border border-[#d4c5a3] text-[#d4c5a3] hover:bg-[#d4c5a3] hover:text-black transition-all font-bold font-sans uppercase text-sm tracking-widest">
                            Arrival
                        </button>
                        <div id="reset-overlay" class="absolute inset-0 bg-white mix-blend-difference opacity-0 pointer-events-none transition-opacity duration-100"></div>
                    </div>
                </div>
            </section>

            <!-- SECTION: CHARACTERS -->
            <section id="characters" class="content-section hidden-content">
                <div class="max-w-5xl mx-auto">
                    <h2 class="text-4xl font-serif text-[#e8e4c9] mb-12">Dramatis Personae</h2>
                    
                    <div class="space-y-4">
                        <!-- Character 1 -->
                        <div class="content-card p-0 flex flex-col md:flex-row overflow-hidden">
                            <div class="w-full md:w-1/3 bg-[#1a1a1a] flex items-center justify-center p-8 border-r border-gray-800">
                                <div class="w-24 h-24 bg-[#d4c5a3] rounded-full blur-sm opacity-50"></div> <!-- Silhouette Placeholder -->
                            </div>
                            <div class="p-8 w-full md:w-2/3">
                                <h3 class="text-2xl font-serif text-white">The Woman</h3>
                                <p class="text-[#8a856b] font-mono text-xs mb-4">SUBJECT: DETERIORATING</p>
                                <p class="text-gray-400 text-sm">
                                    No name. No history. She is a vessel for confusion. Her silhouette becomes more stooped and frail as the game progresses.
                                </p>
                            </div>
                        </div>

                        <!-- Character 2 -->
                        <div class="content-card p-0 flex flex-col md:flex-row overflow-hidden">
                            <div class="w-full md:w-1/3 bg-[#1a1a1a] flex items-center justify-center p-8 border-r border-gray-800">
                                <div class="w-24 h-24 bg-gray-800 rounded-full blur-md"></div>
                            </div>
                            <div class="p-8 w-full md:w-2/3">
                                <h3 class="text-2xl font-serif text-white">The Crowd</h3>
                                <p class="text-[#8a856b] font-mono text-xs mb-4">ENTITIES: HOSTILE/INDIFFERENT</p>
                                <p class="text-gray-400 text-sm">
                                    Faceless figures. Some walk through you. Others shout accusations. They represent the social isolation of London—people are physically close but emotionally unreachable.
                                </p>
                            </div>
                        </div>

                        <!-- Character 3 -->
                        <div class="content-card p-0 flex flex-col md:flex-row overflow-hidden border-red-900/30">
                            <div class="w-full md:w-1/3 bg-[#0f0505] flex items-center justify-center p-8 border-r border-gray-800">
                                <div class="w-24 h-24 bg-black border border-red-900 rounded-full"></div>
                            </div>
                            <div class="p-8 w-full md:w-2/3">
                                <h3 class="text-2xl font-serif text-red-500">The Hooded Figure</h3>
                                <p class="text-red-900 font-mono text-xs mb-4">THE END</p>
                                <p class="text-gray-400 text-sm">
                                    Appears only at the end. The agent of the final loss. Snatches the handbag (identity) and delivers the final blow.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: PROGRESSION -->
            <section id="progression" class="content-section hidden-content">
                <div class="max-w-5xl mx-auto">
                    <h2 class="text-4xl font-serif text-[#e8e4c9] mb-8 text-center">The Descent</h2>
                    
                    <!-- Timeline -->
                    <div class="relative border-l border-[#d4c5a3] ml-4 md:ml-auto md:mr-auto md:w-2/3 space-y-12 pl-8 py-4">
                        
                        <div class="relative">
                            <div class="absolute -left-[39px] top-1 w-5 h-5 bg-[#d4c5a3] rounded-full border-4 border-black"></div>
                            <h3 class="text-xl font-bold text-white">Phase 1: Arrival</h3>
                            <p class="text-sm text-gray-400 mt-2">Turnpike Lane is recognizable. Muted beige tiles. Eerie silence. Mild confusion—why am I here?</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-[39px] top-1 w-5 h-5 bg-[#8a856b] rounded-full border-4 border-black"></div>
                            <h3 class="text-xl font-bold text-white">Phase 2: The Glitch</h3>
                            <p class="text-sm text-gray-400 mt-2">NPCs begin accusations. Station names blur into gibberish (e.g., "WAIT", "WHERE"). Tinnitus ringing begins.</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-[39px] top-1 w-5 h-5 bg-[#404040] rounded-full border-4 border-black"></div>
                            <h3 class="text-xl font-bold text-white">Phase 3: Erosion</h3>
                            <p class="text-sm text-gray-400 mt-2">Tiles ripple like skin. Shadows detach from objects. The "Train Reset" happens more frequently, stripping away inventory.</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-[39px] top-1 w-5 h-5 bg-red-900 rounded-full border-4 border-black"></div>
                            <h3 class="text-xl font-bold text-red-500 glitch-text" data-text="Phase 4: The Void">Phase 4: The Void</h3>
                            <p class="text-sm text-gray-400 mt-2">The Robbery. The Stabbing. The permanent death state. The game saves the corpse to the main menu.</p>
                        </div>

                    </div>
                </div>
            </section>
            
            <!-- SECTION: MECHANICS -->
            <section id="mechanics" class="content-section hidden-content">
                <div class="max-w-6xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-12">
                        <div>
                            <h2 class="text-3xl font-serif text-[#e8e4c9] mb-6">Engineered Frustration</h2>
                            <p class="text-gray-400 mb-6 leading-relaxed">
                                Traditional games empower the player. WaiWWai disempowers them. The mechanics are designed to simulate the loss of agency found in dementia.
                            </p>
                            
                            <div class="space-y-4">
                                <div class="bg-[#1a1a1a] p-4 border-l-2 border-[#d4c5a3]">
                                    <h4 class="font-bold text-[#d4c5a3]">Phantom Inputs</h4>
                                    <p class="text-xs text-gray-500 mt-1">The character stumbles or turns without player input.</p>
                                </div>
                                <div class="bg-[#1a1a1a] p-4 border-l-2 border-[#d4c5a3]">
                                    <h4 class="font-bold text-[#d4c5a3]">Temporal Teleportation</h4>
                                    <p class="text-xs text-gray-500 mt-1">Instant position shifts. Did I walk here? Or did I forget walking here?</p>
                                </div>
                                <div class="bg-[#1a1a1a] p-4 border-l-2 border-[#d4c5a3]">
                                    <h4 class="font-bold text-[#d4c5a3]">The Rare Save (1%)</h4>
                                    <p class="text-xs text-gray-500 mt-1">If jumping on tracks: NPC pulls you back. They are annoyed, not kind. "Watch it, crazy bat."</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-[#0a0a0a] border border-gray-800 p-6 flex flex-col items-center justify-center">
                            <canvas id="mechanic-chart" width="400" height="300"></canvas>
                            <p class="text-center text-xs font-mono text-gray-600 mt-4">PLAYER AGENCY OVER TIME</p>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- Footer -->
        <footer class="border-t border-gray-900 bg-black text-center py-8 mt-12">
            <p class="text-[#404040] text-xs font-mono">MEMORY PERSISTENCE: PERMANENT // ENDING: INEVITABLE</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. The Deceptive Intro ---
            const alertBox = document.getElementById('service-alert');
            const breachBtn = document.getElementById('breach-btn');
            const publicFace = document.getElementById('public-face');
            const gameBible = document.getElementById('game-bible');
            
            // Show alert after a few seconds
            setTimeout(() => {
                alertBox.classList.add('visible');
            }, 2000);

            // Handle Breach
            breachBtn.addEventListener('click', () => {
                // Glitch effect
                publicFace.style.animation = "glitch-anim-1 0.2s infinite";
                publicFace.style.filter = "invert(1) grayscale(1)";
                
                setTimeout(() => {
                    publicFace.style.opacity = "0";
                    setTimeout(() => {
                        publicFace.style.display = "none";
                        gameBible.classList.remove('hidden-content');
                        initRainCanvas(); // Start canvas
                    }, 1000);
                }, 800);
            });

            // --- 2. Navigation ---
            const navBtns = document.querySelectorAll('.nav-btn');
            const sections = document.querySelectorAll('.content-section');

            navBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update Buttons
                    navBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    // Update Content
                    const targetId = btn.dataset.target;
                    sections.forEach(sec => {
                        if(sec.id === targetId) {
                            sec.classList.remove('hidden-content');
                            sec.classList.add('animate-fade-in');
                        } else {
                            sec.classList.add('hidden-content');
                        }
                    });
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            // --- 3. Canvas Rain Effect (The "Pouring Liquid") ---
            function initRainCanvas() {
                const canvas = document.getElementById('rain-canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                const columns = Math.floor(canvas.width / 20);
                const drops = [];

                for(let i=0; i<columns; i++) {
                    drops[i] = Math.random() * canvas.height; // Random start Y
                }

                function draw() {
                    // Semi-transparent black to create trails
                    ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    ctx.fillStyle = '#d4c5a3'; // Beige color
                    ctx.font = '14px monospace';

                    for(let i=0; i<drops.length; i++) {
                        const text = Math.random() > 0.95 ? 'WHERE' : '|';
                        ctx.fillText(text, i*20, drops[i]*20);

                        if(drops[i]*20 > canvas.height && Math.random() > 0.975) {
                            drops[i] = 0;
                        }
                        drops[i]++;
                    }
                    requestAnimationFrame(draw);
                }
                draw();

                window.addEventListener('resize', () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                });
            }

            // --- 4. Chart.js (Mechanics) ---
            const ctx = document.getElementById('mechanic-chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Phase 1', 'Phase 2', 'Phase 3', 'Phase 4'],
                    datasets: [
                        {
                            label: 'Player Agency',
                            data: [100, 60, 20, 0],
                            borderColor: '#d4c5a3',
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            tension: 0.4
                        },
                        {
                            label: 'Confusion/Noise',
                            data: [10, 40, 80, 100],
                            borderColor: '#8a856b',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { labels: { color: '#999', font: { family: 'Courier Prime' } } }
                    },
                    scales: {
                        y: { grid: { color: '#333' }, ticks: { color: '#666' } },
                        x: { grid: { color: '#333' }, ticks: { color: '#666' } }
                    }
                }
            });

            // --- 5. Reset Button Simulation ---
            const resetBtn = document.getElementById('trigger-reset');
            const resetOverlay = document.getElementById('reset-overlay');
            
            resetBtn.addEventListener('click', () => {
                resetOverlay.style.opacity = 1;
                document.body.style.transform = "translate(5px, 5px)";
                setTimeout(() => { document.body.style.transform = "translate(-5px, -5px)"; }, 50);
                setTimeout(() => { document.body.style.transform = "translate(5px, -5px)"; }, 100);
                setTimeout(() => { document.body.style.transform = "translate(0, 0)"; }, 150);
                
                setTimeout(() => {
                    resetOverlay.style.opacity = 0;
                }, 1000);
            });

        });
    </script>
</body>
</html>
